<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <!--<base href="/weather-appN/" />-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WeathApp</title>
  <meta name="title" content="Weather App" />
  <meta name="description" content="This weather app gives us weather predictions for different cities" />

  <!-- Favicon -->
  <link rel="shortcut icon" href="./favicon.svg" type="image/svg+xml" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600&display=swap" rel="stylesheet" />

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-minimap/dist/Control.MiniMap.min.css" />

  <!-- Leaflet Velocity -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-velocity/dist/leaflet-velocity.min.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="./assets/css/Style.css?v=1.0" />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>



<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./service-worker.js')
      .then(() => console.log("âœ… Service Worker enregistrÃ©"))
      .catch(err => console.error("âŒ SW non enregistrÃ©", err));
    
    Notification.requestPermission().then(permission => {
      console.log("ðŸ”” Permission Notification :", permission);
    });
  }
</script>



  <!-- PWA Meta -->
  <link rel="manifest" href="./manifest.webmanifest" />
  

  <link rel="preload" href="./assets/font/material-symbol-rounded.woff2" as="font" type="font/woff2" crossorigin="anonymous" />

  
  <!-- iOS Support -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="WeathApp" />
  <link rel="apple-touch-icon" href="./assets/images/app-icon.jpg" />



</head>
<body>
  <!-- HEADER -->
  <header class="header">


    <div class="container">
      <a href="#" class="logo">
        <img src="./assets/images/logoWeather.PNG" width="200" height="58" alt="logo" />
      </a>

      <div class="search-view" data-search-view>
        <div class="search-wrapper">
          <input type="search" name="search" id="search-input" placeholder="Rechercher une ville..." autocomplete="off" class="search-field" data-search-field />
          <span class="m-icon leading-icon">search</span>
          <button type="button" class="icon-btn leading-icon has-state" title="recherche1" aria-label="close search" data-search-toggler>
            <span class="m-icon">arrow_back</span>
          </button>
        </div>
        <div class="search-result" data-search-result></div>
      </div>

      <div class="header-actions">
        <button class="icon-btn has-state" type="button" title="recherche2" aria-label="open search" data-search-toggler>
          <span class="m-icon">search</span>
        </button>
        <a href="#/current-location" class="btn-primary has-state" data-current-location-btn>
          <span class="m-icon">my_location</span>
          <span class="span">Ma position</span>
        </a>

        <!-- IcÃ´ne du chatbot -->
        <button id="chatbot-toggle" class="icon-btn has-state" aria-label="Ouvrir le chatbot" type="button" title="Ouvrir le Chatbot">ðŸ’¬</button>
      </div>

 
  </header>

  <!-- MAIN -->
  <main>
    <article class="container" data-container>
      <!-- COLONNE GAUCHE -->
      <div class="content-left">
        <section class="section current-weather" aria-label="current weather" data-current-weather></section>
        <section class="section forecast" aria-labelledby="forecast-label" data-5-day-forecast></section>

        <section class="section">
          <h2 class="title-2">Historique</h2>
          <ul id="history-list" class="list-panel"></ul>
        </section>

        <section class="section">
          <h2 class="title-2">Graphique de TempÃ©rature</h2>
          <canvas id="tempChart" width="400" height="200"></canvas>
        </section>
      </div>

      <!-- COLONNE DROITE -->
      <div class="content-right">
        <section class="section" aria-label="Carte">
          <h2 class="title-2">Carte MÃ©tÃ©o</h2>
          <div id="map"></div>
        </section>
    

        <section class="section highlights" aria-labelledby="highlights-label" data-highlights></section>

        <section class="section hourly-forecast" aria-label="hourly forecast" data-hourly-forecast></section>

        <section class="section temperature-chart-section">
            <h2 class="title-2">Courbe des tempÃ©ratures</h2>
            <canvas id="temperatureChart" width="100%" height="200"></canvas>
          </section>
          
        

        <!-- Footer -->
        <footer class="footer">
          <p class="body-3">Copyright 2025 with codewithaudrey. All Rights Reserved.</p>
          <p class="body-3">
            Powered By
            <a href="https://openweathermap.org/api" title="Free OpenWeather API" target="_blank" rel="noopener">
              <img src="./assets/images/openweather.png" width="150" height="30" loading="lazy" alt="OpenWeather" />
            </a>
          </p>
        </footer>
      </div>

      <!-- Loading -->
      <div class="loading" data-loading></div>
    </article>
  </main>

  <!-- SECTION 404 -->
  <section class="error-content" data-error-content>
    <h2 class="heading">404</h2>
    <p class="body-1">Page non trouvÃ©e !</p>
    <a href="#/weather?lat=51.5073219&lon=-0.1276474" class="btn-primary">
      <span class="span">Accueil</span>
    </a>
  </section>

  
   <!-- Modal d'alerte mÃ©tÃ©o -->
  <div class="alert-modal" id="alertModal">
    <div class="alert-content">
        <span class="close-btn" id="closeAlertBtn">&times;</span>
        <h3>Alerte MÃ©tÃ©o</h3>
        <p id="alertMessage">Il pleut dans votre ville, prenez un parapluie !</p>
    </div>
  </div>
    
   <!-- FenÃªtre de Chatbot -->
   <div id="chatbot" class="chatbot-container hidden">
    <div class="chatbot-header">
      <span>ðŸ¤– Chat mÃ©tÃ©o</span>
      <button id="close-chatbot" type="button">âœ–</button>
    </div>
    <div class="chatbot-messages" id="chat-messages"></div>
    <div class="chatbot-input">
      <input type="text" id="chat-input" name="chat" placeholder="Pose ta question..." />
      <button id="send-chat" title="envoyer" aria-label="envoyer" type="button">Envoyer</button>
    </div>
  </div>

  
   <!-- JS -->
   <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
   <script src="https://unpkg.com/leaflet-minimap/dist/Control.MiniMap.min.js"></script>
   <script src="https://unpkg.com/leaflet-velocity/dist/leaflet-velocity.min.js"></script>
   <script src="./assets/js/App1.js" type="module"></script>
   <script src="./assets/js/route.js" type="module"></script>
 
   <script src="./assets/js/assist-meteo.js" type="module"></script>

   <div class="theme-toggle" onclick="toggleTheme()">ðŸŒ“</div>
   <script>
    function toggleTheme() {
      document.body.dataset.theme = document.body.dataset.theme === "light" ? "" : "light";
    }
  </script>
  

</body>
</html>
